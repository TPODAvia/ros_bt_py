<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="tree_renderer.css" />
  <script src="https://d3js.org/d3.v4.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/d3-flextree@2.0.0/build/d3-flextree.js"></script>
  <script src="https://static.robotwebtools.org/roslibjs/current/roslib.js"></script>
  <script src="render_tree.js"></script>
</head>
<body onload="init()">
  <svg id="editor_viewport" width="800" height="600"><g id="container"/></svg>
  <div id="controls" class="box">
    <h4>Controls</h4>
    <div>
      <input type="checkbox" id="debugging" onchange="change_debug_mode(this.checked);" />
      <label for="debugging">Debug</label>
    </div>
    <button onclick="step()">Step</button>
    <button onclick="tick()">Tick</button>
    <button onclick="tick_periodically()">Tick Periodically</button>
    <button onclick="stop_tick()">Stop Ticking</button>
    <button onclick="reset()">Reset tree</button>
    <button onclick="shutdown()">Shut Down Tree (needed to add new nodes)</button>
  </div>
  <div id="add_node" class="box">
    <h4>Add Node</h4>
    <select id="new_node_parents" name="new_node_parents">
    </select>
    <select id="node_type" name="node_type">
      <option value="sequence">Sequence</option>
      <option value="fallback">Fallback</option>
      <option value="succeeder">Succeeder</option>
      <option value="failer">Failer</option>
    </select>
    <button id="add_node_btn" onclick="add_node();">Add</button>
  </div>
  <div id="remove_node" class="box">
    <h4>Remove Node</h4>
    <select id="node_delete_selector" name="node_delete_selector">
    </select>
    <div>
      <input type="checkbox" id="node_delete_children" />
      <label for="node_delete_children">Delete Children</label>
    </div>
    <button id="delete_node_btn" onclick="delete_node()">Delete Node</button>
  </div>
  <div class="box">
    <h4>Available Nodes</h4>
    <button id="refresh" onclick="get_nodes();">Refresh</button>
    <div>
      <input type="text" id="package_name" value="ros_bt_py.nodes.sequence" />
      <button id="load_package" onclick="get_nodes_for_package();">Load package</button>
    </div>
    <div id="node_list" />
  </div>
</body>
</html>
